# Настройка TLS для безопасного gRPC

## Быстрый старт

### Для разработки (самоподписанные сертификаты)

1. Сгенерируйте сертификаты:
   ```bash
   ./scripts/generate-certs.sh
   ```

2. Включите TLS в файле `.env`:
   ```bash
   ENABLE_TLS=true
   ```

3. Запустите сервисы:
   ```bash
   docker-compose up --build
   ```

### Для продакшена

1. Получите сертификаты от доверенного CA
2. Поместите их в папку `certs/`:
   - `certs/server-cert.pem` - сертификат
   - `certs/server-key.pem` - приватный ключ

3. Установите переменные окружения:
   ```bash
   ENABLE_TLS=true
   TLS_CERT_FILE=/app/certs/server-cert.pem
   TLS_KEY_FILE=/app/certs/server-key.pem
   ```

## Проверка безопасности

- ✅ **Безопасно**: Логи показывают "Auth service started with TLS"
- ⚠️ **Небезопасно**: Логи показывают "WARNING: Insecure"

## Устранение проблем

- Если TLS не работает, сервис автоматически запустится без шифрования
- Проверьте права доступа к файлам сертификатов
- Убедитесь, что сертификаты не истекли

Подробная документация: `SECURITY.md`