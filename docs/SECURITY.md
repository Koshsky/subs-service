# Безопасность

## Защита эндпоинтов

### Публичные эндпоинты (без аутентификации)
- `/auth/register` - регистрация пользователей
- `/auth/login` - вход в систему

### Защищенные эндпоинты (требуют аутентификации)
- `/api/*` - все API эндпоинты защищены middleware аутентификации
  - `/api/subscriptions/*` - управление подписками

### Локальные эндпоинты (только с localhost)
- `/health` - проверка состояния сервиса
- `/internal/debug/pprof/*` - отладочная информация

## Middleware безопасности

### Rate Limiting
Все запросы ограничены по частоте для предотвращения DDoS атак.

### Аутентификация
API эндпоинты требуют валидный токен аутентификации в cookie `auth_token`.

### IP-фильтрация
Локальные эндпоинты доступны только с:
- 127.0.0.1 (localhost IPv4)
- ::1 (localhost IPv6)
- 192.168.*.* (локальная сеть)
- 10.*.*.* (локальная сеть)

## Рекомендации по безопасности

1. **Не раскрывайте отладочную информацию** - pprof эндпоинты доступны только локально
2. **Используйте HTTPS** - все запросы должны выполняться по защищенному соединению
3. **Регулярно обновляйте токены** - токены аутентификации имеют ограниченный срок действия
4. **Мониторинг** - отслеживайте подозрительную активность через логи

## Конфигурация безопасности

Для дополнительной защиты можно настроить:
- Белый список IP-адресов для доступа к API
- Дополнительные заголовки безопасности (HSTS, CSP)
- Логирование всех запросов для аудита